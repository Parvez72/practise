'use strict';
const ConfigStore = require('configstore');
let config = new ConfigStore('executor').get('config');
if (!config) {
    config = {};
}
const env = [
    'NEW_RELIC_KEY',
    'urls__AZURE_URL_REDIRECT',
    'XMPP_DOMAIN',
    'sendgrid_key',
    'urls__DATA_SERVICE',
    'urls__AGENTS_SERVICE',
    'urls__CONTROLLER_SERVICE',
    'urls__AI_BACKEND_SERVICE',
    'urls__ML'
];

for (let i = 0; i < env.length; i++) {
    if (process.env[env[i]]) {
        const sp = env[i].split('__');
        if (sp.length === 1) {
            config[env[i]] = process.env[env[i]];
        } else if (sp.length === 2) {
            if (!config.hasOwnProperty(sp[0])) {
                config[sp[0]] = {};
            }
            config[sp[0]][sp[1]] = process.env[env[i]];
        } else if (sp.length === 3) {
            config[sp[0]][sp[1]][sp[2]] = process.env[env[i]];
        }
    }
}

module.exports = config;

